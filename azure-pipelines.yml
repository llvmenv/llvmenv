jobs:
- job: Linux
  pool:
    vmImage: "ubuntu 16.04"
  container: "rust:1.29.1"
  steps:
  - script: |
      cargo test
    displayName: 'cargo test'

- job: Windows
  pool:
    vmImage: vs2017
  steps:
  - script: |
      curl https://sh.rustup.rs -sSf | sh -s -- -y
    displayName: 'Setup Rust'
  - script: |
      %USERPROFILE%/.cargo/bin/cargo test
    displayName: 'cargo test'
