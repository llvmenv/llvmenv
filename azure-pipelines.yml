jobs:
- job: macOS
  pool:
    vmImage: macOS
  steps:
  - script: |
      curl https://sh.rustup.rs -sSf | sh -s -- -y
    displayName: 'Setup Rust'
  - script: |
      cargo test
    displayName: 'cargo test'

- job: Windows
  pool:
    vmImage: vs2017
  steps:
  - script: |
      curl https://sh.rustup.rs -sSf | sh -s -- -y
      setx PATH "%USERPROFILE%/.cargo/bin;%PATH%"
    displayName: 'Setup Rust'
  - script: |
      cargo test
    displayName: 'cargo test'
