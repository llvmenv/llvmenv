jobs:
- job: Linux
  pool:
    vmImage: "ubuntu 16.04"
  variables:
    PATH: "$HOME/.cargo/bin;/usr/bin"
  steps:
  - script: |
      curl https://sh.rustup.rs -sSf | sh -s -- -y
    displayName: 'Setup Rust'
  - script: |
      cargo test
    displayName: 'cargo test'

- job: Windows
  pool:
    vmImage: vs2017
  variables:
    PATH: "%USERPROFILE%/.cargo/bin;C:/Windows/system32"
  steps:
  - script: |
      curl https://sh.rustup.rs -sSf | sh -s -- -y
    displayName: 'Setup Rust'
  - script: |
      cargo test
    displayName: 'cargo test'
